{"version":3,"sources":["../../client.js"],"names":["aphexCountdown","$countdown","$","now","moment","then","differenceInMilliseconds","diff","duration","i","text","setInterval","TextScramble","el","chars","update","bind","newText","oldText","innerText","length","Math","max","queue","from","to","start","floor","random","end","push","cancelAnimationFrame","frameRequest","frame","output","complete","n","char","randomChar","innerHTML","requestAnimationFrame","initScramblers","labelScrambler","document","getElementById","ntsScrambler","scramblerFrequency","phrases","padWithDots","str","maxPaddingString","reduce","a","b","numToAdd","dots","selectedIndex","scrambleText","setText","on","ibeam","flashIbeam"],"mappings":"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","file":"prod.js","sourcesContent":["\nfunction aphexCountdown() {\n    let $countdown = $('#countdown');\n\n    let now = moment();\n    let then = \"03/06/2017 18:00:00\";\n\n    let differenceInMilliseconds = moment(then,\"DD/MM/YYYY HH:mm:ss\")\n        .diff( moment(now,\"DD/MM/YYYY HH:mm:ss\") );\n\n    let duration = moment.duration(differenceInMilliseconds);\n\n    let i = 0;\n\n    $countdown.text(differenceInMilliseconds);\n    setInterval(function() {\n        $countdown.text(differenceInMilliseconds--);\n    }, 100);\n}\n\nclass TextScramble {\n    constructor(el) {\n        this.el = el;\n        // this.chars = '!<>-_\\\\/[]{}—=+*^?#________';\n        this.chars = '!<>-_\\\\/[]{}—=+*^?#___201';\n        this.update = this.update.bind(this)\n    }\n\n    setText(newText) {\n        const oldText = this.el.innerText;\n        const length = Math.max(oldText.length, newText.length);\n        this.queue = [];\n\n        for (let i = 0; i < length; i++) {\n            const from = oldText[i] || '';\n            const to = newText[i] || '';\n\n            const start = Math.floor(Math.random() * 40);\n            const end = start + Math.floor(Math.random() * 40);\n\n            this.queue.push({ from, to, start, end })\n        }\n        cancelAnimationFrame(this.frameRequest);\n        this.frame = 0;\n        this.update();\n    }\n\n    update() {\n        let output = '';\n        let complete = 0;\n        for (let i = 0, n = this.queue.length; i < n; i++) {\n            let { from, to, start, end, char } = this.queue[i];\n            if (this.frame >= end) {\n                complete++;\n                output += to\n            } else if (this.frame >= start) {\n                if (!char || Math.random() < 0.28) {\n                    char = this.randomChar();\n                    this.queue[i].char = char\n                }\n                output += `<span class=\"dud\">${char}</span>`\n            } else {\n                output += from\n            }\n        }\n        this.el.innerHTML = output;\n        if (complete === this.queue.length) {\n            return;\n        } else {\n            this.frameRequest = requestAnimationFrame(this.update);\n            this.frame++\n        }\n    }\n\n    randomChar() {\n        return this.chars[Math.floor(Math.random() * this.chars.length)]\n    }\n}\n\nfunction initScramblers() {\n    const labelScrambler = new TextScramble(document.getElementById('aphex-label'));\n    const ntsScrambler = new TextScramble(document.getElementById('nts-label'));\n\n    let scramblerFrequency = 2000;\n    let phrases = [\n        \"APHEX TWIN\",\n        \"INCOMING\",\n    ];\n\n    function padWithDots(str) {\n        let maxPaddingString = phrases.reduce( function(a, b) {\n            return a.length > b.length ? a : b;\n        });\n\n        let numToAdd = maxPaddingString.length - str.length;\n\n        let dots = '';\n        for (let i=0; i < numToAdd; i++) {\n            dots = dots + \".\";\n        }\n\n        return str + dots;\n    }\n\n    let selectedIndex = 0;\n    let scrambleText = function() {\n        selectedIndex === 0\n            ? selectedIndex++\n            : selectedIndex--;\n\n        labelScrambler.setText( padWithDots(phrases[selectedIndex]));\n        ntsScrambler.setText(\"NTS\");\n    };\n    scrambleText();\n    setInterval( scrambleText, scramblerFrequency);\n}\n\n$(document).on('ready', function () {\n    aphexCountdown();\n    initScramblers();\n\n    let ibeam = $('#flashing-beam');\n    let flashIbeam = function() {\n        ibeam.text().length\n            ? ibeam.text('')\n            : ibeam.text('|');\n    };\n    flashIbeam();\n    setInterval( flashIbeam, 500);\n});"]}